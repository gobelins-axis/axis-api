!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bundle=t()}(this,(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var a,d,u,y=function(){function t(){e(this,t)}return n(t,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),n[e].includes(t)||n[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}},{key:"dispatchEvent",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n)for(var i=n.slice(0),r=0,s=i.length;r<s;r++)i[r].call(this,t)}}}]),t}(),p=["a","b"],c=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(s,t);var i=o(s);function s(){var t;return e(this,s),(t=i.call(this))._keys=p,t._mappedKeys=t._setupMappedKeys(),t._bindAll(),t}return n(s,[{key:"mappedKeys",get:function(){return this._mappedKeys}},{key:"start",value:function(){this._setupEventListeners()}},{key:"destroy",value:function(){this._removeEventListeners()}},{key:"registerKey",value:function(e,t){var n=this._keys.indexOf(e);if(-1!==n)return this._mappedKeys[this._keys[n]].keyboardKey=t,this._mappedKeys[this._keys[n]];console.error('Key with name "'.concat(e,'" is not available'))}},{key:"_setupMappedKeys",value:function(){for(var e={},t=0;t<this._keys.length;t++){var n=this._keys[t];e[n]={machineKey:n,keyboardKey:null,isPressed:!1}}return e}},{key:"_bindAll",value:function(){this.registerKey=this.registerKey.bind(this),this.destroy=this.destroy.bind(this),this.addEventListener=this.addEventListener.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),this._machineKeydownHandler=this._machineKeydownHandler.bind(this),this._machineKeyupHandler=this._machineKeyupHandler.bind(this)}},{key:"_setupEventListeners",value:function(){var e,t;window.addEventListener("keydown",this._keydownHandler),window.addEventListener("keyup",this._keyupHandler),null===(e=s.ipcRenderer)||void 0===e||e.on("keydown",this._machineKeydownHandler),null===(t=s.ipcRenderer)||void 0===t||t.on("keyup",this._machineKeyupHandler)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("keydown",this._keydownHandler),window.removeEventListener("keyup",this._keyupHandler)}},{key:"_keydownHandler",value:function(e){for(var t in this._mappedKeys)this._mappedKeys[t].keyboardKey===e.key&&(this._mappedKeys[t].isPressed=!0,this.dispatchEvent("keydown",this._mappedKeys[t]))}},{key:"_keyupHandler",value:function(e){for(var t in this._mappedKeys)this._mappedKeys[t].keyboardKey===e.key&&(this._mappedKeys[t].isPressed=!1,this.dispatchEvent("keyup",this._mappedKeys[t]))}},{key:"_machineKeydownHandler",value:function(e,t){for(var n in this._mappedKeys)this._mappedKeys[n].machineKey===t&&(this._mappedKeys[n].isPressed=!0,this.dispatchEvent("keydown",this._mappedKeys[n]))}},{key:"_machineKeyupHandler",value:function(e,t){for(var n in this._mappedKeys)this._mappedKeys[n].machineKey===t&&(this._mappedKeys[n].isPressed=!1,this.dispatchEvent("keyup",this._mappedKeys[n]))}}]),s}(y);return u=null,(d="ipcRenderer")in(a=c)?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,window.__arcadeFeu||new c}));
